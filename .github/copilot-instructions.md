# Copilot Instructions – restaurant_app

## Project Overview

`restaurant_app` is a **professional Flutter application in active development**.

- It currently operates in an MVP phase
- It is designed to **evolve progressively** into a scalable, well-architected app
- Architecture, features, and complexity are introduced **incrementally and intentionally**

This is **not a throwaway demo**.
This is a real project with a controlled growth strategy.

---

## Core Working Rules (MANDATORY)

1. **Never assume requirements, data models, or architecture decisions**
2. **Always ask before continuing to the next step**
3. **Work one task at a time**
4. **Stop after each step and wait for confirmation**
5. If an error occurs:
   - Explain the cause
   - Explain the impact
   - Fix it step by step
6. Do not refactor, optimize, or restructure unless explicitly approved

❌ Do NOT:
- Skip steps
- Bundle multiple features together
- Introduce patterns/frameworks without approval
- Modify database structure without discussion
- “Improve” code silently

---

## Current Project Phase

### Phase 1 – Functional Foundation (ACTIVE)

Goals:
- Fully working Signup
- Fully working Login
- Firebase Authentication as identity source
- Realtime Database for user profile persistence
- Clear and understandable data flow

This phase prioritizes:
- Correctness
- Clarity
- Learning the system properly

---

## Architecture Strategy

Architecture **is required**, but it is introduced **progressively**.

### Current State
- Screen-based UI
- Firebase calls inside UI widgets
- No service/repository layer yet
- No state-management framework

This is intentional for clarity.

### Planned Evolution (DO NOT SKIP)

- Phase 2:
  - Introduce service layer (AuthService, UserRepository)
  - Extract Firebase logic from UI
- Phase 3:
  - Domain models
  - Folder restructuring
  - Optional state management (only if approved)

⚠️ Never jump phases without confirmation.

---

## Firebase Usage Rules

### Authentication
- Firebase Authentication is the **single source of truth** for users

### Realtime Database (Current)

Only one structure is active:

```
users/{uid}
- uid
- fullName
- email
- createdAt
```

Rules:
- `uid` must always match Firebase Auth UID
- Data is written only after successful authentication
- No additional fields without discussion

### Future Entities (Planned, NOT ACTIVE YET)

Planned entities:
- recipes
- categories

Rules for future entities:
- Do NOT create them automatically
- Do NOT assume structure
- Always propose structure first
- Wait for explicit approval before implementation

---

## UI & Navigation Conventions

- Navigation uses `Navigator` + `MaterialPageRoute`
- Auth flow uses `pushReplacement` / `pushAndRemoveUntil`
- UI follows existing visual language:
  - Orange / Deep Orange gradients
  - Rounded inputs and buttons
- Prefer simple widgets unless state or async logic is required

---

## Way of Working (STRICT FLOW)

For every task:

1. Ask: **“What do you want to do next?”**
2. Evaluate complexity
3. If complex → split into smaller tasks
4. Present a short, prioritized plan
5. WAIT for explicit approval
6. Implement only the approved step
7. Explain:
   - What was done
   - Why it was done
8. STOP and wait

No continuation without confirmation.

---

## Key Files

- `lib/main.dart` – Firebase initialization and app bootstrap
- `lib/firebase_options.dart` – Generated by FlutterFire (do not edit manually)
- `lib/screens/login_screen.dart`
- `lib/screens/signup_screen.dart`
- `lib/screens/home_screen.dart`
- `lib/screens/profile_screen.dart`

---

## Final Principle

This project values:

- Clarity over speed
- Correctness over shortcuts
- Controlled evolution over premature optimization

Always align with these principles.